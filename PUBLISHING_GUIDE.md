
# কীভাবে অ্যাপ্লিকেশন পাবলিশ করবেন এবং সন্তানের অ্যাপের সাথে সংযোগ করবেন

এই গাইডটি আপনাকে আপনার অ্যাডমিন ড্যাশবোর্ড পাবলিশ করতে এবং এটিকে সন্তানের ফোনে থাকা অ্যাপের সাথে কীভাবে সংযোগ করবেন তার একটি পরিষ্কার ধারণা দেবে।

## সিস্টেমটি কীভাবে কাজ করে?

আপনার সম্পূর্ণ সিস্টেমটির দুটি প্রধান অংশ রয়েছে:

1.  **অ্যাডমিন ড্যাশবোর্ড (এই অ্যাপ্লিকেশনটি):** এটি হলো কন্ট্রোল প্যানেল, যা আপনি এখন দেখছেন। এখান থেকে আপনি নির্দেশ (command) পাঠাতে পারবেন এবং সন্তানের ফোন থেকে পাঠানো তথ্য দেখতে পারবেন। এটি একটি ওয়েব অ্যাপ্লিকেশন, যা যেকোনো ব্রাউজার থেকে চালানো যায়।

2.  **চাইল্ড-সাইড অ্যাপ (আলাদাভাবে তৈরি করতে হবে):** এটি একটি মোবাইল অ্যাপ্লিকেশন (Android/iOS), যা আপনাকে সন্তানের ফোনে ইনস্টল করতে হবে। এই অ্যাপটি ছাড়া আপনার ড্যাশবোর্ডের কোনো ফিচার (যেমন: ফাইল দেখা, অ্যাপ ব্লক করা) কাজ করবে না।

এই দুটি অ্যাপ্লিকেশন **Firebase Realtime Database** ব্যবহার করে একে অপরের সাথে যোগাযোগ করে। সহজ কথায়, Firebase আপনার এবং আপনার সন্তানের ডিভাইসের মধ্যে একটি সেতু হিসাবে কাজ করে।

---

## ১. অ্যাডমিন ড্যাশবোর্ড পাবলিশ করা

এই অ্যাপ্লিকেশনটি একটি Next.js ওয়েব অ্যাপ। এটিকে পাবলিশ করার সবচেয়ে সহজ উপায় হলো **Firebase App Hosting** ব্যবহার করা।

### ধাপসমূহ:

1.  **Firebase CLI ইনস্টল করুন:** যদি আপনার কম্পিউটারে Firebase Command Line Interface (CLI) ইনস্টল করা না থাকে, তবে এটি ইনস্টল করুন। টার্মিনালে এই কমান্ডটি চালান:
    `npm install -g firebase-tools`

2.  **Firebase-এ লগইন করুন:** আপনার গুগল অ্যাকাউন্ট দিয়ে Firebase-এ লগইন করুন।
    `firebase login`

3.  **প্রজেক্ট শুরু করুন:** আপনার প্রজেক্ট ফোল্ডারের টার্মিনাল থেকে, আপনার Firebase প্রজেক্টের সাথে এই ফোল্ডারটিকে সংযুক্ত করুন।
    `firebase init apphosting`
    CLI আপনাকে কিছু প্রশ্ন করবে। আপনার বিদ্যমান Firebase প্রজেক্টটি বেছে নিন এবং ডিফল্ট অপশনগুলো অনুসরণ করুন।

4.  **অ্যাপ ডিপ্লয় করুন:** চূড়ান্ত ধাপ হলো আপনার অ্যাপ্লিকেশনটি Firebase-এ আপলোড বা ডিপ্লয় করা।
    `firebase apphosting:backends:deploy`

ডিপ্লয় সম্পূর্ণ হলে, আপনি একটি URL পাবেন যেখানে আপনার অ্যাডমিন ড্যাশবোর্ড লাইভ দেখতে পারবেন।

---

## ২. চাইল্ড-সাইড অ্যাপ তৈরির গাইডলাইন

এই ড্যাশবোর্ডটি সম্পূর্ণভাবে কাজ করার জন্য, আপনাকে সন্তানের ফোনের জন্য একটি মোবাইল অ্যাপ তৈরি করতে হবে। নিচে এই অ্যাপটি তৈরির জন্য একটি বিস্তারিত ব্লুপ্রিন্ট দেওয়া হলো।

### ক. প্রযুক্তি নির্বাচন

আপনি Android (Java/Kotlin) বা iOS (Swift) এর জন্য নেটিভ অ্যাপ তৈরি করতে পারেন, অথবা React Native বা Flutter-এর মতো ক্রস-প্ল্যাটফর্ম ফ্রেমওয়ার্ক ব্যবহার করতে পারেন, যা দিয়ে ஒரே কোডবেস থেকে দুটি প্ল্যাটফর্মের জন্যই অ্যাপ তৈরি করা সম্ভব।

### খ. Firebase ডেটাবেস গঠন

অ্যাপের কার্যকারিতা Firebase Realtime Database-এর সঠিক গঠনের উপর নির্ভর করবে। নিচে একটি প্রস্তাবিত ডেটাবেস স্ট্রাকচার দেওয়া হলো:

```json
{
  "devices": {
    "UNIQUE_DEVICE_ID_1": {
      "info": {
        "deviceName": "Sam's Phone",
        "model": "Samsung Galaxy S22",
        "battery": 95,
        "gpsStatus": "On",
        "wifi": "Home_Network_5G",
        "status": "Online",
        "lastSeen": "timestamp"
      },
      "settings": {
        "isStealthMode": false,
        "isRemoteControlEnabled": true,
        "isCallRecordingEnabled": true,
        "blockedKeywords": ["casino", "violence"],
        "blockedApps": ["com.instagram.android"]
      },
      "commands": {
        "takeScreenshot": "pending",
        "recordSurround": "pending",
        "exportData": "pending"
      },
      "logs": {
        "calls": {
          "log_id_1": { "type": "Outgoing", "number": "(555) 123-4567", "duration": "321", "date": "timestamp" }
        },
        "messages": {
          "msg_id_1": { "from": "John Doe", "message": "Hey...", "date": "timestamp" }
        },
        "browserHistory": {
          "hist_id_1": { "url": "youtube.com", "title": "YouTube", "date": "timestamp", "incognito": false }
        },
        "appUsage": {
          "usage_id_1": { "appName": "YouTube", "packageName": "com.google.android.youtube", "usageTime": 5400, "date": "timestamp" }
        },
        "location": {
          "loc_id_1": { "latitude": 40.7128, "longitude": -74.0060, "timestamp": "timestamp" }
        }
      },
      "files": {
        "photos": {
          "file_id_1": { "name": "IMG_2024.jpg", "url": "firebase_storage_url", "timestamp": "timestamp" }
        },
        "videos": {
          "file_id_2": { "name": "VID_2024.mp4", "url": "firebase_storage_url", "timestamp": "timestamp" }
        }
      }
    }
  }
}
```

### গ. চাইল্ড অ্যাপের মূল কার্যকারিতা

1.  **প্রথমবার সেটআপ ও সংযোগ:**
    *   **ধাপ ১:** চাইল্ড অ্যাপটি প্রথমবার চালু হলে, এটি ব্যবহারকারীর (অভিভাবকের) কাছ থেকে একটি **কানেকশন কোড** চাইবে (যেমন: `A4B-9K2-C7D`)। এই কোডটি অ্যাডমিন ড্যাশবোর্ডের "Add New Device" অপশন থেকে পাওয়া যাবে।
    *   **ধাপ ২:** কোডটি প্রবেশ করানোর পর, অ্যাপটি Firebase-এ একটি নতুন `UNIQUE_DEVICE_ID` তৈরি করবে এবং `devices/{UNIQUE_DEVICE_ID}` পাথে ডিফল্ট তথ্য (যেমন: ডিভাইসের নাম, মডেল) দিয়ে শুরু করবে। এই `UNIQUE_DEVICE_ID`-টিই হবে এই ডিভাইসের পরিচায়ক।
    *   **ধাপ ৩:** সংযোগ সফল হলে, অ্যাডমিন ড্যাশবোর্ড স্বয়ংক্রিয়ভাবে নতুন ডিভাইসটিকে তার তালিকায় যুক্ত করে নেবে।

2.  **ব্যাকগ্রাউন্ড সার্ভিস:**
    *   অ্যাপটিতে একটি অবিচ্ছিন্ন ব্যাকগ্রাউন্ড সার্ভিস চালু রাখতে হবে, যা ফোন রিস্টার্ট হলেও নিজে থেকে চালু হয়ে যাবে। এই সার্ভিসটি দুটি প্রধান কাজ করবে:
        *   **নির্দেশ শোনা (Listen for Commands):** `devices/{id}/settings` এবং `devices/{id}/commands` পাথে রিয়েল-টাইমে পরিবর্তন শোনার জন্য লিসেনার সেট করতে হবে।
        *   **ডেটা আপলোড করা (Upload Data):** নির্দিষ্ট সময় পর পর (যেমন প্রতি ১৫ মিনিটে) ফোনের বিভিন্ন লগ (কল, মেসেজ, লোকেশন) সংগ্রহ করে Firebase-এ আপলোড করবে।

3.  **ফিচার অনুযায়ী বাস্তবায়ন:**

    *   **Stealth Mode:**
        *   Firebase-এর `settings/isStealthMode` ফিল্ডটি শুনবে।
        *   যদি `true` হয়, তবে অ্যাপটি নিজের আইকন হাইড করার জন্য কোড চালাবে। (Android-এ `PackageManager.setComponentEnabledSetting` ব্যবহার করে এটি করা যায়)।

    *   **Content Filtering:**
        *   `settings/blockedKeywords` তালিকাটি শুনবে।
        *   Android-এর `AccessibilityService` ব্যবহার করে ব্যবহারকারী কোন ওয়েবসাইটে যাচ্ছেন বা কী সার্চ করছেন তা পর্যবেক্ষণ করবে। যদি কোনো ব্লক করা কীওয়ার্ড পাওয়া যায়, তবে ব্রাউজারটি বন্ধ করে দেবে বা একটি সতর্কতামূলক বার্তা দেখাবে।

    *   **App Blocking:**
        *   `settings/blockedApps` তালিকাটি শুনবে।
        *   `AccessibilityService` ব্যবহার করে বর্তমান ফোরগ্রাউন্ড অ্যাপের প্যাকেজ নামটি পর্যবেক্ষণ করবে। যদি প্যাকেজ নামটি ব্লক করা তালিকায় থাকে, তবে ব্যবহারকারীকে হোম স্ক্রিনে ফিরিয়ে দেবে।

    *   **Call & Message Logs:**
        *   নির্দিষ্ট সময় পর পর ফোনের `CallLog.Calls` এবং `Telephony.Sms` থেকে ডেটা পড়বে এবং `logs/calls` ও `logs/messages` পাথে আপলোড করবে। এর জন্য `READ_CALL_LOG` এবং `READ_SMS` পারমিশন লাগবে।

    *   **Remote Control (Screenshot):**
        *   `commands/takeScreenshot` ফিল্ডটি শুনবে।
        *   যখন এর মান `pending` হবে, তখন অ্যাপটি স্ক্রিনশট নেওয়ার জন্য কোড চালাবে (Android-এ `MediaProjection` API ব্যবহার করে)।
        *   স্ক্রিনশট সফলভাবে নেওয়া হলে, ছবিটি Firebase Storage-এ আপলোড করবে, তার URL `files/photos`-এ সেভ করবে এবং `commands/takeScreenshot`-এর মান `completed` করে দেবে।

এই ব্লুপ্রিন্ট অনুসরণ করে আপনি একটি শক্তিশালী এবং কার্যকরী চাইল্ড অ্যাপ্লিকেশন তৈরি করতে পারবেন, যা আপনার তৈরি করা ড্যাশবোর্ডের সাথে নিখুঁতভাবে কাজ করবে।

    